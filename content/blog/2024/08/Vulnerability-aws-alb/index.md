+++
title = "AWS ALBの脆弱性？"
description = "AWS ALBの脆弱性と騒がれているが・・・"
date = 2024-08-28
aliases = ["/articles/2024/08/28/Vulnerability-aws-alb"]

[taxonomies]
tags = ["Tech", "AWS", "Security"]
+++

> First, the attacker creates their own ALB instance with authentication
> configured in their account. The attacker then uses this ALB to sign a
> token they fully control. Next, the attacker alters the ALB configuration
> and sets the issuer field to the victim's expected issuer. AWS
> subsequently signs the attacker's forged token with the victim's issuer.
> Finally, the attacker uses this minted token against the victim's
> application, bypassing both authentication and authorization.
>
> まず、攻撃者は自身のアカウント内に認証を設定した独自の ALB インスタンスを作成します。
> 次に、この ALB を使用して、攻撃者が完全に制御できるトークンに署名します。
> その後、攻撃者は ALB の設定を変更し、発行者フィールドを被害者が期待する発行者に設定します。
> AWS はその結果、攻撃者が偽造したトークンに対して、被害者の発行者として署名を行います。
> 最後に、攻撃者はこの生成されたトークンを使用して被害者のアプリケーションに対して攻撃を仕掛け、認証と認可の両方を回避します。
>
> <cite>
>   [ALBeast Security Advisory by Miggo Research |
>   Miggo](https://www.miggo.io/resources/albeast-security-advisory-alb-vulnerability)
> </cite>

「AWS ALBの脆弱性」と騒がれているけれど、普通にIssuerの検証、JWTトークンの検証、ALBのトラフィックの制限、セキュリティグループの設定をやっていれば関係なくない？「AWS ALBの**ベストプラクティスを無視した間抜けが作ったアプリ**の脆弱性」では？
